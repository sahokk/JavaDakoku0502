package dakoku;

import org.openqa.selenium.By;
import org.openqa.selenium.ElementNotInteractableException;
import org.openqa.selenium.WebDriver;

import login.Login;
import web_control.WebControl;

public abstract class Dakoku {

	private WebDriver driver;
	private WebControl webControl;
	private Login login;
	private String dakokuUrl;
	private By dakokuButtonIn, dakokuButtonOut;

	private boolean flagDakoku;

	public Dakoku(WebControl webControl, Login login, String dakokuUrl, By dakokuButtonIn, By dakokuButtonOut) {
		this.webControl = webControl;
		this.driver = webControl.getDriver();
		this.login = login;
		this.dakokuUrl = dakokuUrl;
		this.dakokuButtonIn = dakokuButtonIn;
		this.dakokuButtonOut = dakokuButtonOut;
		this.flagDakoku = false;
	}

	protected void accessDakokuPage() {
		driver.navigate().to(dakokuUrl);

	}

	protected abstract void pushDakokuListButton();

	private void pushDakokuButtonIn() {
		driver.findElement(dakokuButtonIn).click();
		flagDakoku = true;
	}

	private void pushDakokuButtonOut() {
		driver.findElement(dakokuButtonOut).click();
		flagDakoku = true;
	}

	public boolean dakoku(Dakokustate dakokustate) {
		flagDakoku = false;
		try {
			boolean isLogin = login.login();
			if (isLogin) {
				this.accessDakokuPage();
				this.pushDakokuListButton();
			dakokustate == Dakokustate.IN ? this.pushDakokuButtonIn() : this.pushDakokuButtonOut();

			}
		} catch (ElementNotInteractableException e) {
			e.printStackTrace();
		}
		return flagDakoku;

	}

}
