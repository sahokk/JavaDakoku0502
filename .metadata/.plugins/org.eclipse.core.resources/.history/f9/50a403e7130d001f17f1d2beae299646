package login;

import org.openqa.selenium.By;
import org.openqa.selenium.WebElement;

import db_control.DbControl;
import sys.WebControl;
import utility.DbColumns;

public abstract class Login extends WebControl {
	private String loginUrl;
	private By loginIdField, loginPassField, loginButton;
	private String loginId, loginPass;
	private DbControl dbControl;

	protected Login(String loginUrl, By loginIdField, By loginPassField, By loginButton, DbControl dbControl) {
		super();
		this.loginUrl = loginUrl;
		this.loginIdField = loginIdField;
		this.loginPassField = loginPassField;
		this.loginButton = loginButton;
		this.dbControl = dbControl;

	}

	public void setLoginId(String tableName) {
		this.loginId = dbControl.getInfo(DbColumns.LOGIN_ID, tableName);
	}

	public void setLoginPass(String tableName) {
		this.loginPass = dbControl.getInfo(DbColumns.LOGIN_PASS, tableName);
	}

	private void accessLoginPage() {
		getDriver().get(loginUrl);
	}

	private void sendLoginIdToField() {
		WebElement loginIdElement = getDriver().findElement(loginIdField);
		loginIdElement.sendKeys("");
	}

	private void sendLoginPassToField() {
		WebElement loginPassElement = getDriver().findElement(loginPassField);
		loginPassElement.sendKeys("");
	}

	private void pushLoginButton() {
		getDriver().findElement(loginButton).click();
	}

	public void login() {
		this.accessLoginPage();
		this.sendLoginIdToField();
		this.sendLoginPassToField();
		this.pushLoginButton();
	}

}
